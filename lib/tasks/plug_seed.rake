namespace :ew do
  desc "Seed some Plugs"
  task plug_seed: :environment do
    SmartPlug.last.nil? ? seed_plug : break_out
  end
end

def seed_plug
  yesterday
  today
end

def break_out
  puts 'you already have seeds'
end

def yesterday
  new_plug = SmartPlug.new
  new_plug.todays_date = Date.today.to_s.delete('-').to_i - 1
  new_plug.user = User.last
  new_plug.yesterday = 1000
  new_plug.daily_hash = "{\"12:47\":2,\"13:04\":2,\"13:22\":2,\"13:30\":2,\"13:45\":2,\"14:00\":98,\"14:15\":2,\"14:31\":1361,\"15:09\":2,\"15:16\":2,\"15:31\":2,\"15:46\":0,\"16:01\":0,\"16:16\":0,\"16:31\":0,\"16:46\":0,\"17:01\":0,\"17:16\":0,\"17:31\":0,\"17:46\":0,\"18:01\":0,\"18:16\":0,\"18:31\":0,\"18:46\":0,\"19:01\":0,\"19:16\":0,\"19:31\":0,\"19:46\":0,\"22:01\":0,\"22:16\":0,\"22:31\":0,\"22:46\":0,\"23:01\":0,\"23:16\":0,\"23:31\":0,\"23:46\":0}"
  new_plug.save!
end

def today
  new_plug = SmartPlug.new
  new_plug.todays_date = Date.today.to_s.delete('-').to_i
  new_plug.user = User.last
  new_plug.yesterday = 1341
  new_plug.daily_hash = "{\"10:31\":2,\"10:46\":97,\"11:01\":2,\"11:16\":2,\"11:31\":2,\"11:46\":97,\"12:01\":98,\"12:16\":2,\"12:31\":2,\"12:46\":2,\"13:01\":2,\"13:16\":98,\"13:31\":97,\"13:46\":2,\"14:01\":2,\"14:16\":2,\"14:31\":97,\"14:46\":97,\"15:01\":2,\"15:16\":2,\"15:31\":2,\"15:46\":0,\"16:01\":0,\"16:16\":0,\"16:31\":0,\"16:46\":0,\"17:01\":0,\"17:16\":0,\"17:31\":0,\"17:46\":0,\"18:01\":0,\"18:16\":0,\"18:31\":0,\"18:46\":0,\"19:01\":0,\"19:16\":0,\"19:31\":0,\"19:46\":0,\"20:01\":0,\"20:16\":0,\"20:31\":0,\"20:46\":0,\"21:01\":0,\"21:16\":0,\"21:31\":0}"
  new_plug.save!
end
